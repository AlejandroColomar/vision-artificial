#!/bin/bash
################################################################################
#
# Author:	Alejandro Colomar Andr√©s
#
# This script checks the style in all files of type (.c .cpp .h .hpp) in the
# selected dirs.
#


################################################################################
#	variables							       #
################################################################################
dirs=(
	../
)


################################################################################
#	functions							       #
################################################################################
check_style()
{

	./checkpatch.pl --show-types --no-tree -f $1		\
			--ignore SPDX_LICENSE_TAG,IF_0,SPACING,BRACKET_SPACE
}

find_source_files()
{

	source_files=$(find $1 -type f \( -iname \*.c -o -iname \*.h -o -iname \*.cpp -o -iname \*.hpp \))
}


################################################################################
#	main								       #
################################################################################
for i in ${dirs[*]}
do
	find_source_files ${i}

	for j in ${source_files}
	do
		check_style ${j}
	done
done


################################################################################
#	end of file							       #
################################################################################
